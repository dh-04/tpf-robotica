// Class automatically generated by Dev-C++ New Class wizard

#ifndef BATTERYBOARDPACKETHANDLER_H
#define BATTERYBOARDPACKETHANDLER_H

#include <protocol/BoardPacketHandler.h> // inheriting class's header file
#include <protocol/Packet.h>
#include <protocol/PacketServer.h>
//#include <mutex>

namespace protocol {
namespace handlers {

/**
 * No description
 */
class BatteryBoardPacketHandler : public protocol::BoardPacketHandler
{
	public:
		// class constructor
		BatteryBoardPacketHandler(PacketServer * ps, char groupid, char boardid);
		// class destructor
		~BatteryBoardPacketHandler();
		
		void handlePacket(Packet * p);

		void enable(int id);

		void disable(int id);

		double getBatteryValue(int id, bool refresh=false);

		bool isFull(int id);

		void setEmptyBias(int id, double bias);

		bool isEmpty(int id);

		void setFullBias(int id, double bias);
		
	private:
		char groupid;
		char boardid;
		PacketServer * ps;
		

		int currentValue;
		bool full;
		bool empty;

#ifdef LINUX
		Mutex::Mutex currentValueMutex;
		Mutex::Mutex fullMutex;
		Mutex::Mutex emptyMutex;
#endif

};

}
}


#endif // BATTERYBOARDPACKETHANDLER_CPP
