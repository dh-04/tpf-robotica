\documentclass[a4paper,10pt]{article}

%% Paquetes Adicionales %%

\usepackage[spanish]{babel}
\selectlanguage{spanish}
\spanishdecimal{.}
\addto\captionsspanish{\def\tablename{Cuadro}}
\usepackage{fancyhdr}
\usepackage{graphics}
\usepackage[dvips]{graphicx}
\usepackage[normal]{caption2}
\usepackage{amsfonts,amssymb,amsmath,amsthm}
\usepackage[T1]{fontenc}
\usepackage{moreverb}

%% Declaracion de comandos %%

\newtheorem{lema}{Lema}
\newtheorem{teor}{Teorema}
\newtheorem{propos}{Proposici\'on}
\newtheorem{corol}{Corolario}

\newcommand{\mivec}[1]{\mathbf{#1}}
\newcommand{\vers}[1]{\mivec{\check{#1}}}
\newcommand{\deriv}[2]{\frac{\mathrm{d}#1}{\mathrm{d}#2}}
\newcommand{\expo}[1]{~10^{#1}}
\newcommand{\uni}[1]{\mathrm{#1}} 

\newcommand{\prop}[1]{\begin{propos} #1 \end{propos}}
\newcommand{\teo}[1]{\begin{teor} #1 \end{teor}}
\newcommand{\cor}[1]{\begin{corol} #1 \end{corol}}
\newcommand{\lem}[1]{\begin{lema} #1 \end{lema}}

%% Encabezado y Pie de Pagina %%

\pagestyle{plain}
\lhead{}
\chead{}
\rhead{}
\cfoot{\thepage}
\renewcommand{\footrulewidth}{0.4pt}

\makeindex

%% Titulo %%
\begin{document}
\title{{\ Trabajo pr\'actico final \\ Robot recolector de residuos \\ Protocolo de comunicaci\'on}}

%\date{}

%% Comienzo del documento %%

\maketitle

\begin{abstract}
En el presente se establece el protocolo de comunicaci\'on para el env\'io y recepci\'on de comandos desde y hacia los controladores
de motores, servos y sensores que proveen informaci\'on del entorno al robot recolector de residuos. El protocolo est\'a dise\~nado
para ser transmitido a trav\'es de \emph{RS-232} utilizando la configuraci\'on de \emph{Daisy-Chain} entre las distintas placas controladoras.

\textbf{Palabras Clave: }\emph{Robot, residuos, protocolo, serial, rs-232, daisy chain, motor, servo, sensor, tel\'emetro, ultrasonido, distancia, bateria}.
\end{abstract}

%\thispagestyle{fancy}

%% COMIENZO DEL TEXTO %%

\section{Introducci\'on}
\label{introduccion}

TODO

\section{Formato del paquete}
\label{formato_paquete}


El paquete consta de un header com\'un con datos que identifican el emisor y receptor del paquete, el comando a enviar y posibles datos extras que sean requeridos.
En el cuadro \ref{formato_paquete_tabla} se muestra la estructura interna de un paquete t\'ipico.

\begin{table}[h]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
LARGO & DESTINO & ORIGEN & COMANDO & DATO & CRC \\
\hline
\end{tabular}
\caption{Formato y header del paquete de datos}
\label{formato_paquete_tabla}
\end{center}
\end{table}

Tanto los paquetes de env\'io de datos como los de respuesta tienen el mismo formato y comparten el valor en el campo de comando.

\subsection{LARGO}
\label{largo}

	Indica el largo en bytes del paquete que viene detras, consta de 1 byte.
	Necesario ante la existencia del campo \emph{DATO} de longitud variable.
	En caso que la longitud del campo \emph{DATO} sea cero, es 0x04.

\subsection{DESTINO}
\label{tipo_destinatario}

	Identifica al destinatario del paquete, consta de 1 byte.
	Los 4 bits m\'as significativos indican el grupo y los 4 bits menos significativos, el n\'umero de id de la placa de destino.
	Los grupos predefinidos se tratan en el apartado \ref{grupos_listado}.
	Si el id de placa es F, entonces el paquete es broadcast a todos los ids del grupo indicado.
	El valor 0xFF indica que el paquete es broadcast a todas las placas de todos los grupos.

\subsection{ORIGEN}
\label{tipo_emisor}

	Similar al \emph{DESTINO}, consta de 1 byte.
	Determina el emisor del paquete para la respuesta.
	Los 4 bits m\'as significativos indican el grupo y los 4 bits menos significativos, el n\'umero de id de la placa de origen.
	Los grupos predefinidos se tratan en el apartado \ref{grupos_listado}.
	Los valores permitidos son del 0 al E, ya que F indica broadcast y no es v\'alida una respuesta broadcast.

\subsection{COMANDO}
\label{comando}

	El comando consta de 1 byte.
	Comando enviado al destino, que puede o no tener datos en el campo \emph{DATO}.
	Definidos en la secci\'on \ref{comandos}.


\subsection{DATO}
\label{dato}

	Contiene los par\'ametros o datos extras que puedan ser necesarios para el comando enviado.
	En el caso que el comando no los requiera, el campo debe ser nulo y el campo \emph{LARGO} ser\'a 0x04.

\subsection{CRC}
\label{crc}

	El comando consta de 1 byte.
	C\'alculo de CRC sobre el paquete enviado.
	-Algoritmo a ser determinado-

\section{Posibles comandos}
\label{comandos}

El campo \emph{COMANDO} determina la acci\'on que debe realizarse en el destinatario o la respuesta al comando recibido.
El rango para los comandos comunes a todos los grupos de tarjetas son desde 0x00 hasta 0x3F.
Los comandos espec\'ificos para cada grupo deben ser desde 0x40 hasta 0x7F.
El bit m\'as significativo indica que el paquete es una respuesta, los bits menos significativos, indicaran a qu\'e comando se est\'a respondiendo.

Todos los comandos generan una respuesta o al menos un ACK con el campo \emph{DATOS} vac\'io.

\begin{itemize}
	\item \emph{INITIALIZE}
	\item \emph{RESET CARD}
	\item \emph{PING}
	\item \emph{ERROR}
\label{lista_comandos}
\end{itemize}

\subsection{INIT}
\label{init}

Sincroniza el inicio de todas las placas en la cadena.
Debe ser recibido por la placa para inicializarse y poder informar al controlador principal de su existencia.

Tambi\'en utilizado para obtener la confirmaci\'on del listado de dispositivos conectados.

\subsubsection*{Comando enviado}
\label{init_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x01
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{init_respuesta}

\begin{itemize}
	\item{COMANDO:} 0x81
	\item{DATO:} Descripci\'on de la placa en texto plano
\end{itemize}

\subsection{RESET}
\label{reset}

Pide el reset de la tarjeta

\subsubsection*{Comando enviado}
\label{reset_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x02
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{reset_respuesta}

\begin{itemize}
	\item{COMANDO:} 0x82
	\item{DATO:} Descripci\'on de la placa en texto plano
\end{itemize}

\subsection{PING}
\label{ping}

Envia un ping a la placa

\subsubsection*{Comando enviado}
\label{ping_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x03
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{ping_respuesta}

\begin{itemize}
	\item{COMANDO:} 0x83
	\item{DATO:} vac\'io
\end{itemize}

\subsection{ERROR}
\label{error}

Informa que ha habido un error.

\subsubsection*{Comando enviado}
\label{error_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x04
	\item{DATO:} 1 byte con el c\'odigo de error y la descripci\'on del error en texto plano.
	El valor 0x00 indica un error de CRC en el paquete.
	Cualquier otro valor, indica otro error que depende de la placa y el comando enviado.
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{error_respuesta}

\'Unico comando sin respuesta directa.
En caso de error de CRC deber\'ia retransmitir el paquete o tomar alguna otra acci\'on ante otro tipo de error.

\section{Comandos espec\'ificos}
\label{comandos_especificos}

Cada grupo de placas tiene comandos propios y espec\'ificos dependiendo de la funci\'on que deban desempe\~nar en el sistema.
Existen grupos con comandos predefinidos cada uno se trata en las secciones como se detalla en el listado.
Los comandos espec\'ificos para cada grupo deben ser desde 0x40 hasta el valor 0x7E.

\begin{itemize}
	\item \emph{MAIN CONTROLLER} - secci\'on \ref{grupo_main_controller}
	\item \emph{DC MOTOR} - secci\'on \ref{grupo_dc_motor}
	\item \emph{SERVO MOTOR} - secci\'on \ref{grupo_servo_motor}
	\item \emph{DISTANCE SENSOR} - secci\'on \ref{grupo_distance_sensor}
	\item \emph{FLOOR SENSOR} - secci\'on \ref{grupo_floor_sensor}
	\item \emph{ULTRASONIC SENSOR} - secci\'on \ref{grupo_ultrasonic_sensor}
	\item \emph{BATTERY CONTROLLER} - secci\'on \ref{grupo_battery_controller}
	\item \emph{TRASH BIN} - secci\'on \ref{grupo_trash_bin}
\label{grupos_listado}
\end{itemize}

\section{MAIN CONTROLLER}
\label{grupo_main_controller}

Comandos especificos para el controlador principal.
El identificador de grupo es 0x0X.
-SIN COMANDOS-

\section{DC MOTOR}
\label{grupo_dc_motor}

Comandos espec\'ificos del controlador de velocidad de motor de cont\'inua.
El identificador de grupo es 0x1X.

\subsection{SET DIRECTION}
\label{set_direction}

Seteo del sentido de giro del motor

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} 0x00 para sentido horario \'o 0x01 para sentido anti-horario.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC0
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET DC SPEED}
\label{set_dc_speed}

Seteo de la velocidad del motor en cuentas del encoder por segundo

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} consta de 3 bytes.
		SENTIDO = 0x00 para sentido horario \'o 0x01 para sentido anti-horario.
		VELOCIDAD = 0x0000 a 0xFFFF. Valores positivos, en cuentas por seguntos.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC1
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET ENCODER}
\label{set_encoder}

Seteo de la cantidad de cuentas hist\'oricas del encoder

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} 0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC2
	\item{DATO:} vac\'io
\end{itemize}

\subsection{GET ENCODER}
\label{get_encoder}

Obtener la cantidad de cuentas hist\'oricas del encoder

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC3
	\item{DATO:} 0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767
\end{itemize}

\subsection{RESET ENCODER}
\label{reset_encoder}

Resetear las cuentas hist\'oricas a cero

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC4
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET ENCODER TO STOP}
\label{set_encoder_to_stop}

Seteo de cu\'antas cuentas debe girar hasta detenerse

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} 0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC5
	\item{DATO:} vac\'io
\end{itemize}

\subsection{GET ENCODER TO STOP}
\label{get_encoder_to_stop}

Obtener la cantidad de las cuentas restantes que quedan por realizar hasta detenerse.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC6
	\item{DATO:} 0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767
\end{itemize}

\subsection{DONT STOP}
\label{dont_stop}

Deshace los comandos \ref{set_encoder_to_stop} y \ref{get_encoder_to_stop}, deshabilita el conteo de cuentas para frenar y sigue en el estado actual.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC7
	\item{DATO:} vac\'io
\end{itemize}

\subsection{MOTOR CONSUMPTION}
\label{motor_consumption}

Consulta sobre el consumo actual del motor

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC8
	\item{DATO:} Valor entre 0x0000 y 0x03FF que representa el consumo promedio del \'ultimo segundo.
\end{itemize}

\subsection{MOTOR STRESS ALARM}
\label{motor_stress_alarm}

Indica al controlador principal que hay un consumo extremo en el motor, posiblemente un atasco del motor o de la rueda.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor entre 0x0000 y 0x03FF que representa el consumo ante el que sono la alarma.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC9
	\item{DATO:} vac\'io
\end{itemize}

\section{SERVO MOTOR}
\label{grupo_servo_motor}

Comandos espec\'ificos del controlador de servomotores.
El identificador de grupo es 0x2X.

\subsection{SET POSITION}
\label{set_position}

Determina la posici\'on en la que debe colocarse el servo motor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del servo al que se le aplicar\'a la posici\'on.
	Valor entre 0x00 y 0xB4 que representa el rango de $0^{\circ}$ a $180^{\circ}$ con $1^{\circ}$ de presici\'on.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC0
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET ALL POSITIONS}
\label{set_all_positions}

Determina las posiciones en la que deben colocarse cada uno de los servomotores.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Consta de 5 valores entre 0x00 y 0xB4 concatenados, uno para cada uno de los servos conectados al controlador.
	Cada valor representa el rango de $0^{\circ}$ a $180^{\circ}$ con $1^{\circ}$ de presici\'on.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC1
	\item{DATO:} vac\'io
\end{itemize}

\subsection{GET POSITION}
\label{get_position}

Obtiene la \'ultima posici\'on del servomotor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del servo del que se requiere la posici\'on.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC2
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del servo del que se requiri\'o la posici\'on.
	Valor entre 0x00 y 0xB4 que representa el rango de $0^{\circ}$ a $180^{\circ}$ con $1^{\circ}$ de presici\'on.
\end{itemize}

\subsection{GET ALL POSITIONS}
\label{get_all_positions}

Obtiene las \'ultimas posiciones de todos los servomotor conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC3
	\item{DATO:} Consta de 5 valores entre 0x00 y 0xB4 concatenados, uno para cada uno de los servos conectados al controlador.
	Cada valor representa el rango de $0^{\circ}$ a $180^{\circ}$ con $1^{\circ}$ de presici\'on.
\end{itemize}

\subsection{SET SERVO SPEED}
\label{set_servo_speed}

Determina la velocidad a la que el servomotor indicado llegar\'a a la posici\'on.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del servo al que se le aplicar\'a la velocidad.
	Valor entre 0x00 y 0xB4, velocidad en grados por segundo.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC4
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET ALL SPEEDS}
\label{set_all_speeds}

Determina las velocidades a la que cada uno de los servomotores llegar\'a a la posici\'on indicada.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Consta de 5 valores entre 0x00 y 0xB4 concatenados, uno para cada uno de los servos conectados al controlador.
	Cada valor representa a la velocidad en grados por segundo.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC5
	\item{DATO:} vac\'io
\end{itemize}

\subsection{GET SERVO SPEED}
\label{get_servo_speed}

Obtiene la velocidad asignada al servomotor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del servo del que se requiere la velocidad.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC6
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del servo del que se requiri\'o la velocidad.
	Valor entre 0x00 y 0xB4, velocidad en grados por segundo.
\end{itemize}

\subsection{GET ALL SPEEDS}
\label{get_all_speeds}

Obtiene las velocidades de cada uno de los servomotor conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC7
	\item{DATO:} Consta de 5 valores entre 0x00 y 0xB4 concatenados, uno para cada uno de los servos conectados al controlador.
	Cada valor representa a la velocidad en grados por segundo.
\end{itemize}

\subsection{FREE SERVO}
\label{free_servo}

Deja de aplicar fuerza sobre el servo indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del servo a liberar.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC8
	\item{DATO:} vac\'io
\end{itemize}

\subsection{FREE ALL SERVOS}
\label{free_all_servos}

Deja de aplicar fuerza sobre cada uno de los servomotor conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC9
	\item{DATO:} vac\'io
\end{itemize}

\section{DISTANCE SENSOR}
\label{grupo_distance_sensor}

Comandos espec\'ificos del controlador de sensores de distancia, generalmente tel\'emetros.
El identificador de grupo es 0x3X.

\subsection{ENABLE DISTANCE SENSOR}
\label{enable_distance_sensor}

Enciende el sensor de distancia indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x04 que representa el id del sensor a encender.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC0
	\item{DATO:} vac\'io
\end{itemize}

\subsection{DISABLE DISTANCE SENSOR}
\label{disable_distance_sensor}

Apaga el sensor de distancia indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Valor de 0x00 a 0x04 que representa el id del sensor a apagar.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC1
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET ALL DISTANCE SENSORS}
\label{set_all_distance_sensors}

Enciende o apaga cada uno de los sensores de distancia conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x1F donde cada bit representa el id del sensor a encender o apagar.
	Si $2^{ID} = 1$ entonces el sensor $ID$ est\'a encendido.
	Si $2^{ID} = 0$ entonces el sensor $ID$ est\'a apagado.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC2
	\item{DATO:} vac\'io
\end{itemize}


\subsection{GET VALUE}
\label{get_value_ds}

Obtiene el valor promedio de la entrada del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC3
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ALL VALUES}
\label{get_all_values_ds}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC4
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUE}
\label{get_one_value_ds}

Obtiene el valor de la entrada del sensor indicado.
Igual al comando \ref{get_value_ds} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC5
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUES FOR ALL}
\label{get_one_values_for_all_ds}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_values_ds} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC6
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor de la lectura que representa la distancia al objeto.
\end{itemize}

\section{FLOOR SENSOR} 
\label{grupo_floor_sensor}

Comandos espec\'ificos del controlador de sensores de piso.
El identificador de grupo es 0x4X.

\subsection{ENABLE FLOOR SENSOR}
\label{enable_fs}

Enciende el sensor de piso indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x04 que representa el id del sensor a encender.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC0
	\item{DATO:} vac\'io
\end{itemize}

\subsection{DISABLE FLOOR SENSOR}
\label{disable_fs}

Apaga el sensor de piso indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Valor de 0x00 a 0x04 que representa el id del sensor a apagar.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC1
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET ALL FLOOR SENSORS}
\label{set_all_fs}

Enciende o apaga cada uno de los sensores de piso conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x1F donde cada bit representa el id del sensor a encender o apagar.
	Si $2^{ID} = 1$ entonces el sensor $ID$ est\'a encendido.
	Si $2^{ID} = 0$ entonces el sensor $ID$ est\'a apagado.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC2
	\item{DATO:} vac\'io
\end{itemize}

\subsection{GET VALUE}
\label{get_value_fs}

Obtiene el valor promedio de la entrada del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC3
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ALL VALUES}
\label{get_all_values_fs}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC4
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUE}
\label{get_one_value_fs}

Obtiene el valor de la entrada del sensor indicado.
Igual al comando \ref{get_value_fs} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC5
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUE FOR ALL}
\label{get_one_values_for_all_fs}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_values_fs} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC6
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor de la lectura que representa la distancia al objeto.
\end{itemize}

\section{ULTRASONIC SENSOR} 
\label{grupo_ultrasonic_sensor}

Comandos espec\'ificos del controlador de sensores de ultrasonido.
El identificador de grupo es 0x5X.

\subsection{ENABLE ULTRASONIC SENSOR}
\label{enable_ultrasonic_sensor}

Enciende el sensor de ultrasonido indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x04 que representa el id del sensor a encender.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC0
	\item{DATO:} vac\'io
\end{itemize}

\subsection{DISABLE ULTRASONIC SENSOR}
\label{disable_ultrasonic_sensor}

Apaga el sensor de ultrasonido indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Valor de 0x00 a 0x04 que representa el id del sensor a apagar.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC1
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET ALL ULTRASONIC SENSOR}
\label{set_all_ultrasonic_sensor}

Enciende o apaga cada uno de los sensores de ultrasonido conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x1F donde cada bit representa el id del sensor a encender o apagar.
	Si $2^{ID} = 1$ entonces el sensor $ID$ est\'a encendido.
	Si $2^{ID} = 0$ entonces el sensor $ID$ est\'a apagado.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC2
	\item{DATO:} vac\'io
\end{itemize}

\subsection{GET VALUE}
\label{get_value_us}

Obtiene el valor promedio de la entrada del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC3
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ALL VALUES}
\label{get_all_values_us}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC4
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUE}
\label{get_one_value_us}

Obtiene el valor de la entrada del sensor indicado.
Igual al comando \ref{get_value_us} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC5
	\item{DATO:} Valor de 0x00 a 0x04 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUE FOR ALL}
\label{get_one_values_for_all_us}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_values_fs} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC6
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor de la lectura que representa la distancia al objeto.
\end{itemize}

\section{BATTERY CONTROLLER} 
\label{grupo_battery_controller}

Comandos espec\'ificos del controlador de carga y consumo de la bater\'ia.
El identificador de grupo es 0x6X.

\subsection{GET BATTERY VALUE}
\label{get_battery_value}

Obtiene el valor de la entrada de la bater\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC0
	\item{DATO:} Valor de 0x0000 a 0x03FF que representa la lectura de los voltios de la bateria.
\end{itemize}

\subsection{BATTERY FULL ALARM}
\label{battery_full_alarm}

Mensaje enviado desde el controlador de la bateria informando que se completado la carga de la misma.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC1
	\item{DATO:} vac\'io
\end{itemize}

\subsection{SET BATTERY EMPTY VALUE}
\label{set_battery_empty_value}

Establece el valor de la bater\'ia para ser tomado como cr\'itico.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x0000 a 0x03FF que representa la lectura de los voltios de la bater\'ia.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC2
	\item{DATO:} vac\'io
\end{itemize}

\subsection{BATTERY EMPTY ALARM}
\label{battery_empty}

Mensaje enviado desde el controlador de la bater\'ia informando que de el voltaje lleg\'o a un valor cr\'itico.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x0000 a 0x03FF que representa la lectura de los voltios de la bater\'ia.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC3
	\item{DATO:} vac\'io
\end{itemize}

\section{TRASH BIN}
\label{grupo_trash_bin}

Comandos espec\'ificos del controlador de carga en el cesto de basura.
El identificador de grupo es 0x7X.

\subsection{GET TRASH BIN VALUE}
\label{get_trash_bin_value}

Obtiene el valor que representa que tan lleno est\'a el cesto interno de basura.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC0
	\item{DATO:} Valor de 0x0000 a 0x03FF que representa que tan lleno est\'a el cesto interno de basura.
\end{itemize}

\subsection{BIN FULL ALARM}
\label{bin_full_alarm}

Mensaje enviado desde el controlador del cesto de basura informando que se completado y debe ser descargado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0xC1
	\item{DATO:} vac\'io
\end{itemize}


\section{Ejemplos}
\label{ejemplos}

NOT YET DEFINED

\end{document}