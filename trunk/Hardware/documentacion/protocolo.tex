\documentclass[a4paper,10pt]{article}

%% Paquetes Adicionales %%

\usepackage[spanish]{babel}
\selectlanguage{spanish}
\spanishdecimal{.}
\addto\captionsspanish{\def\tablename{Cuadro}}
\usepackage{fancyhdr}
\usepackage{graphics}
\usepackage[dvips]{graphicx}
\usepackage[normal]{caption2}
\usepackage{amsfonts,amssymb,amsmath,amsthm}
\usepackage[T1]{fontenc}
\usepackage{moreverb}

%% Declaracion de comandos %%

\newtheorem{lema}{Lema}
\newtheorem{teor}{Teorema}
\newtheorem{propos}{Proposici\'on}
\newtheorem{corol}{Corolario}

\newcommand{\mivec}[1]{\mathbf{#1}}
\newcommand{\vers}[1]{\mivec{\check{#1}}}
\newcommand{\deriv}[2]{\frac{\mathrm{d}#1}{\mathrm{d}#2}}
\newcommand{\expo}[1]{~10^{#1}}
\newcommand{\uni}[1]{\mathrm{#1}} 

\newcommand{\prop}[1]{\begin{propos} #1 \end{propos}}
\newcommand{\teo}[1]{\begin{teor} #1 \end{teor}}
\newcommand{\cor}[1]{\begin{corol} #1 \end{corol}}
\newcommand{\lem}[1]{\begin{lema} #1 \end{lema}}

%% Encabezado y Pie de Pagina %%

\pagestyle{plain}
\lhead{}
\chead{}
\rhead{}
\cfoot{\thepage}
\renewcommand{\footrulewidth}{0.4pt}

%% Titulo %%
\begin{document}
\title{{\ Trabajo pr\'actico final \\ Robot recolector de residuos \\ Protocolo de comunicaci\'on}}

%\date{}

%% Comienzo del documento %%

\maketitle

\begin{abstract}
En el presente se establece el protocolo de comunicaci\'on para el env\'io y recepci\'on de comandos hacia los controladores
de motores, servos y sensores que proveen informaci\'on del entorno al robot recolector de residuos. El protocolo est\'a dise\~nado
para ser transmitido a trav\'es de \emph{RS-232} utilizando la configuraci\'on de \emph{Daisy-Chain} entre las distintas placas controladoras.

\textbf{Palabras Clave: }\emph{Robot, residuos, protocolo, serial, rs-232, daisy chain, motor, servo, sensor, tel\'emetro, ultrasonido, distancia, bateria}.
\end{abstract}

%\thispagestyle{fancy}

%% COMIENZO DEL TEXTO %%

\section{Introducci\'on}
\label{introduccion}

TODO

\section{Formato del paquete}
\label{formato_paquete}


El paquete consta de un header com\'un con datos que identifican el emisor y receptor del paquete, el comando a enviar y posibles datos extras que sean requeridos.
En el cuadro \ref{formato_paquete_tabla} se muestra la estructura interna de un paquete t\'ipico.

\begin{table}[h]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline
TIPO\_D & ID\_D & TIPO\_O & ID\_O & COMANDO & LARGO & DATO & CRC \\
\hline
\end{tabular}
\caption{Formato y header del paquete de datos}
\label{formato_paquete_tabla}
\end{center}
\end{table}

Tanto los paquetes de env\'io de datos como los de respuesta tienen el mismo formato y comparten el valor en el campo de comando.

\subsection{TIPO\_D}
\label{tipo_destinatario}

	El comando consta de 1 byte.
	Informa el grupo del destinatario del paquete.
	Grupos predefinidos en el listado \ref{grupos_listado}.
	Bit 7: Broadcast a todos los IDs de un mismo grupo.
	Bits 6-0: Grupo al que va dirigido el paquete. El grupo 0x7F est\'a reservado para hacer broadcast a todas las placas sin importar el grupo (Grupo 0xFF).

\subsection{ID\_D}
\label{id_destinatario}

	El comando consta de 1 byte.
	Marca el n\'umero de id de la placa de destino.
	Si el bit 7 del campo \emph{TIPO} de destino est\'a activo, el \emph{ID} se ignora.

\subsection{TIPO\_O}
\label{tipo_emisor}

	El comando consta de 1 byte.
	Determina el grupo del emisor del paquete para la respuesta del paquete.
	Grupos predefinidos en el listado \ref{grupos_listado}.
	Bit 7: El 0 es mandatorio, la respuesta debe tener un \'unico destinatario.
	Bit 6-0: Grupo de origen del paquete.
	El grupo 0x7F est\'a reservado para hacer broadcast a todas las placas sin importar el grupo y no debe ser utilizado como origen del paquete.

\subsection{ID\_O}
\label{id_emisor}

	El comando consta de 1 byte.
	Informa a que n\'umero de id debe ser dirigida la respuesta del paquete.
	Es mandatorio, debe estar informado para una correcta respuesta.
	En caso contrario, se toma como valor por defecto el del controlador principal, en este caso, la PC.
		
\subsection{COMANDO}
\label{comando}

	El comando consta de 1 byte.
	Comando enviado al destino, que puede o no tener datos en el campo \emph{DATO}.
	Definidos en la secci\'on \ref{comandos}.

\subsection{LARGO}
\label{largo}

	El comando consta de 1 byte.
	Largo en bytes del campo \emph{DATO}.
	En caso que el largo del campo \emph{DATO} sea cero, igual debe ser informado con 0x00.

\subsection{DATO}
\label{dato}

	El comando consta de \emph{LARGO} bytes.
	Contiene los par\'ametros o datos extras que puedan ser necesarios para el comando enviado.
	En el caso que el comando no los requiera, el campo debe ser nulo y el largo ser\'a 0x00.

\subsection{CRC}
\label{crc}

	El comando consta de 1 byte.
	C\'alculo de CRC sobre el paquete enviado.
	-Algoritmo a ser determinado-

\section{Posibles comandos}
\label{comandos}

El campo \emph{COMANDO} determina la acci\'on que debe realizarse en el destinatario o la respuesta al comando recibido.
El rango para los comandos comunes a todos los grupos de tarjetas son desde 0x00 hasta 0x3F.
Los comandos espec\'ificos para cada grupo deben ser desde 0x40 hasta 0x7F.

\begin{itemize}
	\item \emph{INITIALIZE}
	\item \emph{RESET CARD}
	\item \emph{PING}
	\item \emph{ERROR}
\label{lista_comandos}
\end{itemize}

\subsection{INIT}
\label{init}

Sincroniza el inicio de todas las placas en la cadena.
Debe ser recibido por la placa para inicializarse y poder informar al controlador principal de su existencia.

\subsubsection*{Comando enviado}
\label{init_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x01
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{init_respuesta}

\begin{itemize}
	\item{COMANDO:} 0x01
	\item{DATO:} Descripci\'on de la placa en texto plano
\end{itemize}

\subsection{RESET}
\label{reset}

Pide el reset de la tarjeta

\subsubsection*{Comando enviado}
\label{reset_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x02
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{reset_respuesta}

Sin respuesta

\subsection{PING}
\label{ping}

Envia un ping a la placa

\subsubsection*{Comando enviado}
\label{ping_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x03
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{ping_respuesta}

\begin{itemize}
	\item{COMANDO:} 0x03
	\item{DATO:} vac\'io
\end{itemize}

\subsection{ERROR}
\label{error}

Informa que ha habido un error.

\subsubsection*{Comando enviado}
\label{error_comando_enviado}

\begin{itemize}
	\item{COMANDO:} 0x04
	\item{DATO:} 1 byte con el c\'odigo de error y la descripci\'on del error en texto plano.
\end{itemize}

\subsubsection*{Respuesta al comando}
\label{error_respuesta}

Sin respuesta.

\section{Comandos espec\'ificos}
\label{comandos_especificos}

Cada grupo de placas tiene comandos propios y espec\'ificos dependiendo de la funci\'on que deban desempe\~nar en el sistema.
Existen grupos con comandos predefinidos como se aprecia en el listado \ref{grupos_listado}.
Los comandos espec\'ificos para cada grupo deben ser desde 0x40 hasta el valor 0x7E.

\begin{itemize}
	\item \emph{MAIN CONTROLLER} - secci\'on \ref{grupo_main_controller}
	\item \emph{DC MOTOR} - secci\'on \ref{grupo_dc_motor}
	\item \emph{SERVO MOTOR} - secci\'on \ref{grupo_servo_motor}
	\item \emph{DISTANCE SENSOR} - secci\'on \ref{grupo_distance_sensor}
	\item \emph{FLOOR SENSOR} - secci\'on \ref{grupo_floor_sensor}
	\item \emph{ULTRASONIC SENSOR} - secci\'on \ref{grupo_ultrasonic_sensor}
	\item \emph{BATTERY CONTROLLER} - secci\'on \ref{grupo_battery_controller}
	\item \emph{TRASH BIN} - secci\'on \ref{grupo_trash_bin}
\label{grupos_listado}
\end{itemize}

\section{MAIN CONTROLLER}
\label{grupo_main_controller}

NOT YET DEFINED
El identificador de grupo es 0x00.

\section{DC MOTOR}
\label{grupo_dc_motor}

Comandos espec\'ificos del controlador de velocidad de motor de cont\'inua.
El identificador de grupo es 0x01.

\subsection{SET DIRECTION}
\label{set_direction}

Seteo del sentido de giro del motor

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} 0x00 para sentido horario \'o 0x01 para sentido anti-horario.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET DC SPEED}
\label{set_dc_speed}

Seteo de la velocidad del motor en cuentas del encoder por segundo

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} consta de 6 bytes.
		SENTIDO = 0x00 para sentido horario \'o 0x01 para sentido anti-horario.
		VELOCIDAD = 0x0000 a 0xFFFF. Valores positivos, en cuentas por seguntos.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET ENCODER}
\label{set_encoder}

Seteo de la cantidad de cuentas hist\'oricas del encoder

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} 0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{GET ENCODER}
\label{get_encoder}

Obtener la cantidad de cuentas hist\'oricas del encoder

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} 0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767
\end{itemize}

\subsection{RESET ENCODER}
\label{reset_encoder}

Resetear las cuentas hist\'oricas a cero

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET ENCODER TO STOP}
\label{set_encoder_to_stop}

Seteo de cu\'antas cuentas a girar hasta detenerse

\subsubsection*{Comando enviado}

0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{GET ENCODER TO STOP}
\label{get_encoder_to_stop}

Obtener la cantidad de cuantas cuentas restantes hasta detenerse

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} 0x0000 a 0xFFFF. Valores con signo, 0xFFFF es -32768 y 0x7FFF es 32767
\end{itemize}

\subsection{DONT STOP}
\label{dont_stop}

Borrar la limitaci\'on de cuentas para frenar

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{MOTOR CONSUMPTION}
\label{motor_consumption}

Consulta sobre el consumo actual del motor

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} Valor en punto flotante del consumo promedio del \'ultimo segundo. -VER FORMATO DEL PUNTO FLOTANTE-
\end{itemize}

\subsection{MOTOR STRESS ALARM}
\label{motor_stress_alarm}

Indica al controlador principal que hay un consumo extremo en el motor, posiblemente un atasco del motor o de la rueda.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor en punto flotante del consumo. -VER FORMATO DEL PUNTO FLOTANTE-
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\section{SERVO MOTOR}
\label{grupo_servo_motor}

Comandos espec\'ificos del controlador de servomotores.
El identificador de grupo es 0x02.

\subsection{SET POSITION}
\label{set_position}

Determina la posici\'on en la que debe colocarse el servomotor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del servo al que se le aplicar\'a la posici\'on.
	Valor entre 0x0000 y 0x0384 que representa el rango de $0^{\circ}$ a $180^{\circ}$ con $0.2^{\circ}$ de presici\'on. -VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET ALL POSITIONS}
\label{set_all_positions}

Determina las posiciones en la que deben colocarse cada uno de los servomotores.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x0384 concatenados, uno para cada uno de los servos conectados al controlador.
	Cada valor representa el rango de $0^{\circ}$ a $180^{\circ}$ con $0.2^{\circ}$ de presici\'on. -VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{GET POSITION}
\label{get_position}

Obtiene la \'ultima posici\'on del servomotor indicado. -INICIALIZARLO EN UN VALOR DETERMINADO CUANDO LLEGA INIT-

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del servo del que se requiere la posici\'on.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del servo del que se requiri\'o la posici\'on.
	Valor entre 0x0000 y 0x0384 que representa el rango de $0^{\circ}$ a $180^{\circ}$ con $0.2^{\circ}$ de presici\'on. -VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsection{GET ALL POSITIONS}
\label{get_all_positions}

Obtiene las \'ultimas posiciones de todos los servomotor conectados al controlador. -INICIALIZARLO EN UN VALOR DETERMINADO CUANDO LLEGA INIT-

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x0384 concatenados, uno para cada uno de los servos conectados al controlador.
	Cada valor representa el rango de $0^{\circ}$ a $180^{\circ}$ con $0.2^{\circ}$ de presici\'on. -VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsection{SET SERVO SPEED}
\label{set_servo_speed}

Determina la velocidad a la que el servomotor indicado llegar\'a a la posici\'on que se le indique.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del servo al que se le aplicar\'a la velocidad.
	-VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET ALL SPEEDS}
\label{set_all_speeds}

Determina las velocidades a la que cada uno de los servomotores llegar\'a a la posici\'on que se le indique.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Consta de 5 valores entre -VER POSIBLES VALORES- concatenados, uno para cada uno de los servos conectados al controlador.
	-VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{GET SERVO SPEED}
\label{get_servo_speed}

Obtiene la velocidad asiganda al servomotor indicado. -INICIALIZARLO EN UN VALOR DETERMINADO CUANDO LLEGA INIT-

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del servo del que se requiere la velocidad.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del servo del que se requiri\'o la velocidad.
	-VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsection{GET ALL SPEEDS}
\label{get_all_speeds}

Obtiene las velocidades de cada uno de los servomotor conectados al controlador. -INICIALIZARLO EN UN VALOR DETERMINADO CUANDO LLEGA INIT-

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x0384 concatenados, uno para cada uno de los servos conectados al controlador.
	-VERIFICAR POSIBILIDADES EN LOS SERVOS-
\end{itemize}

\subsection{FREE SERVO}
\label{free_servo}

Deja de aplicar fuerza sobre el servo indicado -VERIFICAR QUE SEA CORRECTO-

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del servo a liberar.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{FREE ALL SERVOS}
\label{free_all_servos}

Deja de aplicar fuerza sobre cada uno de los servomotor conectados al controlador. -VERIFICAR QUE SEA CORRECTO-

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\section{DISTANCE SENSOR} 
\label{grupo_distance_sensor}

Comandos espec\'ificos del controlador de sensores de distancia, generalmente tel\'emetros.
El identificador de grupo es 0x03.

\subsection{ENABLE DISTANCE SENSOR}
\label{enable_distance_sensor}

Enciende el sensor de distancia indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x05 que representa el id del sensor a encender.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{DISABLE DISTANCE SENSOR}
\label{disable_distance_sensor}

Apaga el sensor de distancia indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Valor de 0x00 a 0x05 que representa el id del sensor a apagar.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET ALL DISTANCE SENSORS}
\label{set_all_distance_sensors}

Enciende o apaga cada uno de los sensores de distancia conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x020 donde cada bit representa el id del sensor a encender o apagar.
	Si $2^{ID} = 1$ entonces el sensor $ID$ est\'a encendido.
	Si $2^{ID} = 0$ entonces el sensor $ID$ est\'a apagado.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{GET DISTANCE}
\label{get_distance_ds}

Obtiene la distancia del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0xFFFF que representa la distancia en mil\'imetros al objeto.
\end{itemize}

\subsection{GET ALL DISTANCES}
\label{get_all_distances_ds}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0xFFFF concatenados, uno para cada uno de los sensores conectados al controlador.
\end{itemize}

\subsection{GET VALUE}
\label{get_value_ds}

Obtiene el valor en voltios del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ALL VALUES}
\label{get_all_values_ds}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE DISTANCE}
\label{get_one_distance_ds}

Obtiene la distancia del sensor indicado.
Igual al comando \ref{get_distance_ds} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0xFFFF que representa la distancia en mil\'imetros al objeto.
\end{itemize}

\subsection{GET ONE DISTANCE FOR ALL}
\label{get_one_distance_for_all_ds}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_distances_ds} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0xFFFF concatenados, uno para cada uno de los sensores conectados al controlador.
\end{itemize}

\subsection{GET ONE VALUE}
\label{get_one_value_ds}

Obtiene el valor en voltios del sensor indicado.
Igual al comando \ref{get_value_ds} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUES FOR ALL}
\label{get_one_values_for_all_ds}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_values_ds} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x50
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x50
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\section{FLOOR SENSOR} 
\label{grupo_floor_sensor}

Comandos espec\'ificos del controlador de sensores de piso.
El identificador de grupo es 0x04.

\subsection{ENABLE FLOOR SENSOR}
\label{enable_fs}

Enciende el sensor de piso indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x05 que representa el id del sensor a encender.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{DISABLE FLOOR SENSOR}
\label{disable_fs}

Apaga el sensor de piso indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Valor de 0x00 a 0x05 que representa el id del sensor a apagar.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET ALL FLOOR SENSORS}
\label{set_all_fs}

Enciende o apaga cada uno de los sensores de piso conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x020 donde cada bit representa el id del sensor a encender o apagar.
	Si $2^{ID} = 1$ entonces el sensor $ID$ est\'a encendido.
	Si $2^{ID} = 0$ entonces el sensor $ID$ est\'a apagado.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{GET VALUE}
\label{get_value_fs}

Obtiene el valor en voltios del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ALL VALUES}
\label{get_all_values_fs}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUE}
\label{get_one_value_fs}

Obtiene el valor en voltios del sensor indicado.
Igual al comando \ref{get_value_fs} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUES FOR ALL}
\label{get_one_values_for_all_fs}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_values_fs} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x50
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x50
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\section{ULTRASONIC SENSOR} 
\label{grupo_ultrasonic_sensor}

Comandos espec\'ificos del controlador de sensores de ultrasonido.
El identificador de grupo es 0x05.

\subsection{ENABLE ULTRASONIC SENSOR}
\label{enable_ultrasonic_sensor}

Enciende el sensor de ultrasonido indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x00 a 0x05 que representa el id del sensor a encender.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{DISABLE ULTRASONIC SENSOR}
\label{disable_ultrasonic_sensor}

Apaga el sensor de ultrasonido indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} Valor de 0x00 a 0x05 que representa el id del sensor a apagar.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET ALL ULTRASONIC SENSOR}
\label{set_all_ultrasonic_sensor}

Enciende o apaga cada uno de los sensores de ultrasonido conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x00 a 0x020 donde cada bit representa el id del sensor a encender o apagar.
	Si $2^{ID} = 1$ entonces el sensor $ID$ est\'a encendido.
	Si $2^{ID} = 0$ entonces el sensor $ID$ est\'a apagado.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{GET DISTANCE}
\label{get_distance_us}

Obtiene la distancia del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0xFFFF que representa la distancia en mil\'imetros al objeto.
\end{itemize}

\subsection{GET ALL DISTANCES}
\label{get_all_distances_us}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x44
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0xFFFF concatenados, uno para cada uno de los sensores conectados al controlador.
\end{itemize}

\subsection{GET VALUE}
\label{get_value_us}

Obtiene el valor en voltios del sensor indicado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x45
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ALL VALUES}
\label{get_all_values_us}

Obtiene las distancias de cada uno de los sensores conectados al controlador.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x46
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE DISTANCE}
\label{get_one_distance_us}

Obtiene la distancia del sensor indicado.
Igual al comando \ref{get_distance_us} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x47
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0xFFFF que representa la distancia en mil\'imetros al objeto.
\end{itemize}

\subsection{GET ONE DISTANCE FOR ALL}
\label{get_one_distance_for_all_us}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_distances_us} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x48
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0xFFFF concatenados, uno para cada uno de los sensores conectados al controlador.
\end{itemize}

\subsection{GET ONE VALUE}
\label{get_one_value_us}

Obtiene el valor en voltios del sensor indicado.
Igual al comando \ref{get_value_us} pero si es necesario enciende el sensor, toma la lectura y luego lo apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que se quiere la lectura.
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x49
	\item{DATO:} Valor de 0x00 a 0x05 que determina el id del sensor del que proviene el la lectura de distancia.
	Valor de 0x0000 a 0x03FF con el valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\subsection{GET ONE VALUES FOR ALL}
\label{get_one_values_for_all_us}

Obtiene las distancias de cada uno de los sensores conectados al controlador.
Igual al comando \ref{get_all_values_fs} pero si es necesario enciende los sensores, toma las lecturas y luego los apaga para un mayor ahorro de energ\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x50
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x50
	\item{DATO:} Consta de 5 valores entre 0x0000 y 0x03FF concatenados, uno para cada uno de los sensores conectados al controlador.
	Valor en voltios de la lectura que representa la distancia al objeto.
\end{itemize}

\section{BATTERY CONTROLLER} 
\label{grupo_battery_controller}

Comandos espec\'ificos del controlador de carga y consumo de la bater\'ia.
El identificador de grupo es 0x06.

\subsection{GET BATTERY VALUE}
\label{get_battery_value}

Obtiene el valor en voltios de la bater\'ia.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x0000 a 0x03FF con el valor en voltios de la bateria.
\end{itemize}

\subsection{BATTERY FULL ALARM}
\label{battery_full_alarm}

Mensaje enviado desde el controlador de la bateria informando que se completado la carga de la misma.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{SET BATTERY EMPTY VALUE}
\label{set_battery_empty_value}

Establece el valor de la bater\'ia para ser tomado como cr\'itico.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x42
	\item{DATO:} Valor de 0x0000 a 0x03FF con el valor en voltios de la bater\'ia.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\subsection{BATTERY EMPTY ALARM}
\label{battery_empty}

Mensaje enviado desde el controlador de la bater\'ia informando que de el voltaje lleg\'o a un valor cr\'itico.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x43
	\item{DATO:} Valor de 0x0000 a 0x03FF con el valor en voltios de la bater\'ia.
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta

\section{TRASH BIN}
\label{grupo_trash_bin}

Comandos espec\'ificos del controlador de carga en el cesto de basura.
El identificador de grupo es 0x07.

\subsection{GET TRASH BIN VALUE}
\label{get_trash_bin_value}

Obtiene el valor que representa que tan lleno est\'a el cesto interno de basura.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

\begin{itemize}
	\item{COMANDO:} 0x40
	\item{DATO:} Valor de 0x0000 a 0x03FF que representa que tan lleno est\'a el cesto interno de basura.
\end{itemize}

\subsection{BIN FULL ALARM}
\label{bin_full_alarm}

Mensaje enviado desde el controlador del cesto de basura informando que se completado y debe ser descargado.

\subsubsection*{Comando enviado}

\begin{itemize}
	\item{COMANDO:} 0x41
	\item{DATO:} vac\'io
\end{itemize}

\subsubsection*{Respuesta al comando}

Sin respuesta


\section{Ejemplos}
\label{ejemplos}

NOT YET DEFINED

\end{document}